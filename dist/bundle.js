(()=>{let t=["Backspace","Tab","CapsLock"," ","Meta","Shift","Enter","\\"];const e=["Tab","CapsLock","ShiftLeft","ControlLeft","MetaLeft","AltLeft","AltRight","ControlRight","ArrowLeft","ArrowUp","ArrowDown","ArrowRight","ShiftRight","Enter","Backspace"];let c=[],o=!0;keyArr=[];const n=document.createElement("div");n.classList.add("main-container"),document.body.appendChild(n);const r=document.createElement("textarea");r.classList.add("input"),document.body.insertBefore(r,n),async function(){const a=await fetch("data.json");(await a.json()).forEach((e=>{const c=document.createElement("div");c.classList.add("row"),e.forEach((e=>{const o=document.createElement("div");o.classList.add("char"),o.setAttribute("code",`${e.code}`),o.setAttribute("ru",`${e.ru}`),o.setAttribute("en",`${e.key}`),o.textContent=`${e.key}`,"MetaLeft"===e.code&&(o.textContent="Win"),"Control"===e.key&&(o.textContent="Ctrl"),"ArrowUp"===e.key&&(o.textContent="↑"),"ArrowLeft"===e.key&&(o.textContent="←"),"ArrowRight"===e.key&&(o.textContent="→"),"ArrowDown"===e.key&&(o.textContent="↓"),"ShiftLeft"===e.code&&o.classList.add("shift-left"),"ShiftRight"===e.code&&o.classList.add("shift-right"),"Enter"===e.code&&o.classList.add("enter"),"Backslash"===e.code&&o.classList.add("backslash"),t.forEach((t=>{t===e.key&&o.classList.add("extended")}))," "===e.key&&o.classList.add("space"),n.appendChild(c),c.appendChild(o)}))})),function(){let t=[];document.addEventListener("keydown",(function(n){n.repeat||(t.push(n.code),t.forEach((t=>{document.querySelectorAll(".char").forEach((e=>{e.getAttribute("code")===t&&e.classList.add("active")}));let o=document.querySelector(`.char[code = ${n.code}]`);e.includes(o.getAttribute("code"))||(c.push(o.textContent),r.innerText=c.join("")),"Backspace"===o.getAttribute("code")&&(c.pop(),r.innerText=c.join(""))})),t.includes("ShiftLeft","ControlLeft")&&2===t.length&&(o?document.querySelectorAll(".char").forEach((t=>{if(!e.includes(t.getAttribute("code"))){const e=t.getAttribute("ru");t.textContent=e}o=!1})):document.querySelectorAll(".char").forEach((t=>{if(!e.includes(t.getAttribute("code"))){const e=t.getAttribute("en");t.textContent=e}o=!0}))))})),document.addEventListener("keyup",(function(e){0!=t.length&&(t.forEach((t=>{document.querySelectorAll(".char").forEach((e=>{e.getAttribute("code")===t&&e.classList.remove("active")}))})),t.length=0)}))}(),document.querySelectorAll(".char").forEach((t=>{t.addEventListener("click",(()=>{document.querySelectorAll(".char").forEach((t=>{})),e.includes(t.getAttribute("code"))||(c.push(t.textContent),r.innerText=c.join("")),"Backspace"===t.getAttribute("code")&&(c=r.value.split(""),c.pop(),r.value=c.join(""))}))})),document.querySelector(".char[code = 'Backspace']").addEventListener("click",(()=>{c=r.value.split(""),c.pop(),r.value=c.join("")}))}()})();